<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>OpenDots</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <link rel="stylesheet" href="app/src/styles/style.css" />
    <link rel="shortcut icon" href="app/resrc/images/OpenDots.png" type="image/x-icon">
</head>

<body>
    <div class="header">
        <div class="headerIcons">
            <div class="headerIcon" id="burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <img src="app/resrc/images/user.png" alt="user" class="headerIcon" id="user">
        </div>
        <a href="index.html"><img src="app/resrc/images/OpenDots.png" alt="OpenDots" class="icon">OpenDots</a>
    </div>
    <main class="container">
        <div id="config">
            <h4>Configure</h4>
            <select id="sourceSelect">
                <option value="DataSource" disabled selected>Data Source</option>
                <option value="mqtt">MQTT</option>
                <option value="thingspeak">ThingSpeak</option>
                <option value="adafruit">Adafruit IO</option>
                <option value="blynk">Blynk</option>
                <option value="grafana">Grafana</option>
            </select>
            <div id="dynamicInputs" class="row"></div>
            <button id="loadBtn" onclick="loadData()">Fetch</button>
            <div id="msg-container">
            </div>
        </div>
        <div class="divider" id="divider1"></div>

        <div id="dashboard">
            <div id="loader">
                <l-line-spinner size="25" stroke="1.5" speed="1" color="white"></l-line-spinner>
            </div>
            <div id="details" class="details" style="display:none;">
                <div><span id="chName"></span></div>
                <div><span id="chDesc"></span></div> <br>
                <div>Created: <span id="chCreated"></span> &nbsp; Updated: <span id="chUpdated"></span></div> <br>
                <div>Fields: <span id="chFields"></span></div>
            </div>

            <div class="filter">
                <div id="slicerGroup" class="slicer"></div>
            </div>

            <div id="chartsContainer"></div>
            <details id="logSection">
                <summary>Data Logs</summary>
                <div class="table-wrapper">
                    <div id="tableContainer"></div>
                </div>
            </details>
        </div>
        <div class="divider" id="divider2"></div>
        <div id="ai">
            <div id="ai-header">
                <h4><img src="app/resrc/images/infinity.png" class="icon" alt="">Infinity AI</h4>
                <button id="clearBtn" onclick="clearChat()">Clear</button>
            </div>
            <div id="response-container">
                <div class="ai-response">Hi! I'm Infinity, your intelligent data assistant.
                    Ask me anything about your sensor data â€” I'll visualize, summarize, and explain it for you.</div>
            </div>
            <div class="ai-inputs">
                <input type="text" id="query" placeholder="Type query here...">
                <button id="sendBtn" onclick="ask()">></button>
            </div>
        </div>
    </main>
    <footer>
        <p>v1.0.0</p>
        <p>&copy; 2025 Ojas Gupta & Tejas Gupta. | License: MIT | <a
                href="https://github.com/multiverseweb/OpenDots">GitHub</a></p>
    </footer>

    <script type="module" src="https://cdn.jsdelivr.net/npm/ldrs/dist/auto/lineSpinner.js"></script>
    <script src="app/src/scripts/script.js"></script>
    <script src="app/src/scripts/load.js"></script>
</body>

</html>